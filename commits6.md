[< 5. Файл .gitignore](./aboutgitignore5.md)

[> 7. Ветвление в _GIT_](./aboutbranches7.md)

# **6. Команды для работы с коммитами**

## **Внесение изменений однострочным сообщением или через редактор**

При создании коммита в репозитории можно добавить однострочное сообщение с помощью параметра `commit` с флагом `-m`. Само сообщение вводится непосредственно после флага, в кавычках.

> `git commit -m "Your short summary about the commit"`

Также можно открыть текстовый редактор в терминале для написания полного сообщения коммита. Оно может состоять из нескольких строк текста, в котором подробно характеризуются изменения, внесённые в репозиторий.

>`git commit`

---

## **Просмотр истории коммитов с изменениями**

Просматривать изменения, внесённые в репозиторий, можно с помощью параметра `log`. Он отображает список последних коммитов в порядке выполнения. Кроме того, добавив флаг `-p`, вы можете подробно изучить изменения, внесённые в каждый файл.

> `git log -p`

---

## **Просмотр заданного коммита**

Просмотреть полный список изменений, внесённых конкретным коммитом, можно с помощью параметра `show`, указав идентификатор или хеш коммита. Значение хеша уникально для каждого коммита, созданного в вашем репозитории.

> `git show 1af17e73721dbe0c40011b82ed4bb1a7dbe3ce29`

Также можно использовать сокращённый хеш.

> `git show 1af17e`

---

## **Просмотр изменений до коммита**

Можно просматривать список изменений, внесённых в репозиторий, используя параметр `diff`. По умолчанию отображаются только изменения, не подготовленные для фиксации.

>`git diff`

Для просмотра подготовленных изменений необходимо добавить флаг `--staged`.

>`git diff --staged`

Также можно указать имя файла как параметр и просмотреть изменения, внесённые только в этот файл.

> `git diff somefile.js`

---

## **Удаление отслеживаемых файлов из текущего рабочего дерева**

Удалять файлы из текущего рабочего дерева можно с помощью параметра `rm`. При этом файлы удаляются и из индекса.

> `git rm dirname/somefile.js`

Можно также использовать маски файлов (например `*.js`) для удаления всех файлов, соответствующих критерию.

> `git rm dirname/*.html`

## **Переименование файлов**

Переименовать файл или папку можно параметром `mv`. Для него указывается источник `source` и назначение `destination`. Источник — реально существующий файл или папка, а назначение — существующая папка.

> `git mv dir1/somefile.js dir2`

При выполнении команды файл или папка, указанные как источник, будут перемещены в папку назначения. Индекс будет обновлён соответственно, но изменения нужно записать.

## **Отмена подготовленных и неподготовленных изменений**

Восстановить файлы рабочего дерева, не подготовленные к коммиту, можно параметром `checkout`. Для проведения операции требуется указать путь к файлу. Если путь не указан, параметр `git checkout` изменит указатель `HEAD`, чтобы задать указанную ветку как текущую.

> `git checkout somefile.js`

Восстановить подготовленный файл рабочего дерева можно параметром `reset`. Потребуется указать путь к файлу, чтобы убрать его из области подготовленных файлов. При этом не будет производиться откат никаких изменений или модификаций — однако файл перейдёт в категорию не подготовленных к коммиту.

> `git reset HEAD somefile.js`

Если нужно выполнить это действие для всех подготовленных файлов, путь к ним указывать не надо.

> `git reset HEAD`

---

## **Изменение последнего коммита**

Внести изменения в последний коммит можно параметром `commit` с флагом `--amend`. Например, вы записали изменения, внесённые в ряд файлов, и поняли, что допустили ошибку в сообщении коммита. В этом случае можете воспользоваться указанной командой, чтобы отредактировать сообщение предыдущего коммита, не изменяя его снимок.

>`git commit --amend -m "Updated message for the previous commit"`

Также можно вносить изменения в файлы, отправленные ранее. Например, вы изменили несколько файлов в ряде папок и хотите их записать как единый снимок, но забыли добавить в коммит одну из папок. Чтобы исправить такую ошибку, достаточно подготовить для фиксации остальные файлы и папки и создать коммит с флагами `--amend` и `--no-edit`.

> `git add dir1`  
>`git commit`

>*#Here you forgot to add dir2 to commit, you can execute the following command to amend the other files and folders.*

> `git add dir2`
> `git commit --amend --no-edit`

Флаг `--no-edit` позволит внести в коммит поправку без изменения сообщения коммита. В этом случае итоговый коммит заменит неполный, а выглядеть это будет так, как будто мы отправили изменения ко всем файлам в нужных папках как единый снимок.

### ***Внимание! Не изменяйте публичные коммиты.***

С помощью `amend` прекрасно исправляются локальные коммиты, а исправления можно передать в общий репозиторий. Однако изменять коммиты, уже доступные другим пользователям, не следует. Помните, что изменённые коммиты являются совершенно новыми, а предыдущий коммит уже не будет доступен в текущей ветке. Последствия будут такими же, как при отмене изменений публичного снимка.

---

## **Откат последнего коммита**

Откатить последний коммит можно с помощью параметра `revert`. Создастся новый коммит, содержащий обратные преобразования относительно предыдущего, и добавится к истории текущей ветки.

> `git revert HEAD`

### ***Разница между revert и reset***

Команда `git revert` отменяет изменения, записанные только одним коммитом. Она не откатывает проект к более раннему состоянию, удаляя все последующие коммиты, как это делает команда `git reset`.

У команды `revert` есть два крупных преимущества по сравнению с `reset`. Во-первых, она не меняет историю проекта и производит операцию, безопасную для коммитов. Во-вторых, её объектом выступает конкретный коммит, созданный в любой момент истории, а `git reset` всегда берёт за точку отсчёта текущий коммит. К примеру, если нужно отменить старый коммит с помощью `git reset`, придётся удалить все коммиты, поданные после целевого, а затем выполнить их повторно. Следовательно, команда `git revert` — гораздо более удобный и безопасный способ отмены изменений.

---

## **Откат заданного коммита**

Откатить проект до заданного коммита можно с помощью параметра `revert` и идентификатора коммита. Создастся новый коммит — копия коммита с предоставленным идентификатором — и добавится к истории текущей ветки.

>`git revert 1af17e`


---

[< К содержанию](./readme.md)